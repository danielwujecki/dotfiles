#!/usr/bin/env bash
set -uo pipefail
# run this as crontab, rather than a polybar module

FILEPATH="$HOME/.cache/updates.txt"

kernelpath="$(find /usr/src -maxdepth 1 -name 'linux-*' -type d | sort -V | tail -n1)"
latestver="$(basename $kernelpath)"
currver="$(readlink /usr/src/linux)"

if [[ $latestver = $currver ]] ; then
    echo "" > "$FILEPATH"
else
    echo "(new kernel)" > "$FILEPATH"
fi

#!/usr/bin/bash

# run this as crontab, rather than a polybar module

# check for network
ping -c1 "debian.org"
if [[ $? -ne 0 ]] ; then
    echo "No network connection!" > /dev/stderr
    exit 2
fi

FILEPATH="$HOME/.cache/check_new_kernel.txt"
NEWKERNEL="$(checkupdates | grep -E '^linux\s+[1-9.-]+\.arch[1-9]+-[1-9]+')"

if [[ -n $NEWKERNEL ]] ; then
    echo "new kernel" > "$FILEPATH"
else
    echo -n "" > "$FILEPATH"
fi
